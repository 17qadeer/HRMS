<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Survey Graph</title>
    <!-- Include Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <!-- Include Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container">
        <h1 class="mt-5 mb-4">Survey Graph</h1>
        <canvas id="surveyChart" width="400" height="200"></canvas>
        <button onclick="window.history.back()" class="btn btn-primary">Back</button>
    </div>

    <script>
        // Get the canvas element
        var ctx = document.getElementById('surveyChart').getContext('2d');

        // Extracting data passed from the controller
        var averageWorkEnvironmentRating = [[${averageWorkEnvironmentRating}]];
        var averageJobSatisfactionRating = [[${averageJobSatisfactionRating}]];
        var averageLeadershipRating = [[${averageLeadershipRating}]];

        // Create the chart data
        var surveyData = {
            labels: ['Work Environment', 'Job Satisfaction', 'Leadership'],
            datasets: [{
                label: 'Average Ratings',
                backgroundColor: ['rgba(255, 99, 132, 0.5)', 'rgba(54, 162, 235, 0.5)', 'rgba(255, 206, 86, 0.5)'],
                borderColor: ['rgba(255, 99, 132, 1)', 'rgba(54, 162, 235, 1)', 'rgba(255, 206, 86, 1)'],
                borderWidth: 1,
                data: [averageWorkEnvironmentRating, averageJobSatisfactionRating, averageLeadershipRating]
            }]
        };

        // Chart configuration
        var chartOptions = {
            scales: {
                yAxes: [{
                    ticks: {
                        beginAtZero: true
                    }
                }]
            }
        };

        // Create the chart
        var surveyChart = new Chart(ctx, {
            type: 'bar',
            data: surveyData,
            options: chartOptions
        });
    </script>
</body>
</html>
